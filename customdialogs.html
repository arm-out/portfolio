<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Custom Dialogs</title>
		<script type="text/javascript" src="/lib/src/purify.min.js"></script>
		<script type="module" src="/js/customdialog.js"></script>
	</head>
	<body>
		<h1>Custom Dialogs</h1>
		<button type="button" id="b1">Alert</button>
		<button type="button" id="b2">Confirm</button>
		<button type="button" id="b3">Prompt</button> <br />
		<br />
		<output id="out"></output>

		<dialog id="cstm-alert">
			<h1>Alert</h1>
			<button id="alertOK" type="button" value="default">OK</button>
		</dialog>

		<dialog id="cstm-confirm">
			<h1>Confirm</h1>
			<p>Please confirm</p>
			<button id="confirmCancel" type="button">Cancel</button>
			<button id="confirmOK" value="default" type="button">OK</button>
		</dialog>

		<dialog id="cstm-prompt">
			<h1>Prompt</h1>
			<form method="dialog">
				<label for="intext">Please enter your name</label><br />
				<input type="text" id="intext" name="intext" /><br />
				<br />
				<button id="promptCancel" type="button">Cancel</button>
				<button id="promptOK" value="default" type="submit">OK</button>
			</form>
		</dialog>

		<script type="module">
			import {
				cstmAlert,
				cstmConfirm,
				cstmPrompt,
				promptInput,
			} from "/js/customdialog.js";

			window.addEventListener("DOMContentLoaded", init);

			function init() {
				let b1 = document.getElementById("b1");
				let b2 = document.getElementById("b2");
				let b3 = document.getElementById("b3");
				let p = document.getElementById("cstm-prompt");
				let output = document.getElementById("out");

				b1.addEventListener("click", () => {
					cstmAlert();
				});

				b2.addEventListener("click", () => {
					cstmConfirm();
				});

				b3.addEventListener("click", () => {
					cstmPrompt();
				});

				p.addEventListener("close", () => {
					let dirty = promptInput;
					let clean = DOMPurify.sanitize(dirty);
					output.innerHTML = clean
						? `Prompt input: ${clean}`
						: "User didnâ€™t enter anything";
				});
			}
		</script>
	</body>
</html>
